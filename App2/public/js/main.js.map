{"version":3,"sources":["webpack:///main.js","webpack:///./app-src/js/main.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","34","97","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_extends","assign","target","i","arguments","length","source","_jsx","REACT_ELEMENT_TYPE","Symbol","for","type","props","children","defaultProps","childrenLength","propName","childArray","Array","$$typeof","undefined","ref","_owner","_createClass","defineProperties","descriptor","defineProperty","protoProps","staticProps","_react","_react2","_reactDom","_reactDom2","_redux","Redux","_reactRedux","config","dataSrc","_ref","className","FlightAppCls","_React$Component","this","_this","getPrototypeOf","state","flights","_this2","fetch","then","response","ok","json","_err","status","statusText","url","err","data","isArray","sort","a","b","arrival","departure","setState","console","log","carrier","carriers","reduce","result","item","indexOf","push","Provider","store","FlightSelector","list","current","onChange","changeCarrier","FlightList","Component","mapperStoreStateToProps","flightApp","mapperDispatchToProps","dispatch","evt","FlightApp","connect","_ref2","map","filter","createElement","FlightEntry","entry","dt1","Date","dt2","f","t","h","getHours","m","getMinutes","id","direction","from","to","toLocaleDateString","createStore","initData","initStates","reducers","action","r","combineReducers","render","document","getElementById"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,EAASC,GAE/BF,EAAOC,QAAUC,EAAoB,KAKhCC,GACA,SAASH,EAAQC,KAMjBG,GACA,SAASJ,EAAQC,EAASC,GClBhC,YDiDC,SAASG,GAAwBC,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAIE,KAAa,IAAW,MAAPF,EAAe,IAAK,GAAIG,KAAOH,GAAWI,OAAOC,UAAUC,eAAeC,KAAKP,EAAKG,KAAMD,EAAOC,GAAOH,EAAIG,GAAgC,OAAtBD,GAAOM,QAAUR,EAAYE,EAElQ,QAASO,GAAuBT,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQQ,QAASR,GAEvF,QAASU,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMR,GAAQ,IAAKQ,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOT,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BQ,EAAPR,EAElO,QAASU,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASb,UAAYD,OAAOgB,OAAOD,GAAcA,EAAWd,WAAagB,aAAeC,MAAOJ,EAAUK,cAAmBC,YAAgBC,mBAA6BN,IAAYf,OAAOsB,eAAiBtB,OAAOsB,eAAeR,EAAUC,GAAcD,EAASS,UAAYR,GA9Bje,GAAIS,GAAWxB,OAAOyB,QAAU,SAAUC,GAAU,IAAK,GAAIC,GAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,GAAIG,GAASF,UAAUD,EAAI,KAAK,GAAI5B,KAAO+B,GAAc9B,OAAOC,UAAUC,eAAeC,KAAK2B,EAAQ/B,KAAQ2B,EAAO3B,GAAO+B,EAAO/B,IAAY,MAAO2B,IAEnPK,EAAO,WAAc,GAAIC,GAAuC,kBAAXC,SAAyBA,OAAOC,KAAOD,OAAOC,IAAI,kBAAoB,KAAQ,OAAO,UAA+BC,EAAMC,EAAOrC,EAAKsC,GAAY,GAAIC,GAAeH,GAAQA,EAAKG,aAAkBC,EAAiBX,UAAUC,OAAS,CAAuD,IAA/CO,GAA4B,IAAnBG,IAAwBH,MAAkBA,GAASE,EAAgB,IAAK,GAAIE,KAAYF,GAAwC,SAApBF,EAAMI,KAAwBJ,EAAMI,GAAYF,EAAaE,QAA2BJ,KAASA,EAAQE,MAAsB,IAAuB,IAAnBC,EAAwBH,EAAMC,SAAWA,MAAiB,IAAIE,EAAiB,EAAG,CAA0C,IAAK,GAAzCE,GAAaC,MAAMH,GAA0BZ,EAAI,EAAGA,EAAIY,EAAgBZ,IAAOc,EAAWd,GAAKC,UAAUD,EAAI,EAAMS,GAAMC,SAAWI,EAAc,OAASE,SAAUX,EAAoBG,KAAMA,EAAMpC,IAAa6C,SAAR7C,EAAoB,KAAO,GAAKA,EAAK8C,IAAK,KAAMT,MAAOA,EAAOU,OAAQ,UAEr4BC,EAAe,WAAc,QAASC,GAAiBtB,EAAQU,GAAS,IAAK,GAAIT,GAAI,EAAGA,EAAIS,EAAMP,OAAQF,IAAK,CAAE,GAAIsB,GAAab,EAAMT,EAAIsB,GAAW9B,WAAa8B,EAAW9B,eAAqB8B,EAAW5B,gBAAyB,SAAW4B,KAAYA,EAAW7B,aAAiBpB,OAAOkD,eAAexB,EAAQuB,EAAWlD,IAAKkD,IAAiB,MAAO,UAAUzC,EAAa2C,EAAYC,GAAiJ,MAA9HD,IAAYH,EAAiBxC,EAAYP,UAAWkD,GAAiBC,GAAaJ,EAAiBxC,EAAa4C,GAAqB5C,MCzBjiB6C,EAAA7D,EAAA,ID6BK8D,EAAUjD,EAAuBgD,GC5BtCE,EAAA/D,EAAA,IDgCKgE,EAAanD,EAAuBkD,GC/BzCE,EAAAjE,EAAA,IAAYkE,EDmCC/D,EAAwB8D,GClCrCE,EAAAnE,EAAA,GACAA,GAAA,GAMA,IAAMoE,IAELC,QAAS,aDsDLC,EAAO/B,EAAK,OACfgC,UCIkB,gBDHhB,OAAQ,0BChDNC,EDkDc,SAAUC,GCjD7B,QAAAD,GAAa5B,GAAO9B,EAAA4D,KAAAF,EAAA,IAAAG,GAAAzD,EAAAwD,MAAAF,EAAAzC,WAAAvB,OAAAoE,eAAAJ,IAAA7D,KAAA+D,KACb9B,GADa,OAEnB+B,GAAKE,OAASC,YAFKH,ED+HnB,MA7EAtD,GAAUmD,EAAcC,GAWxBlB,EAAaiB,IACZjE,IAAK,oBACLmB,MAAO,WC1DY,GAAAqD,GAAAL,IACpBM,OAAMZ,EAAOC,YAAaY,KAAK,SAAAC,GAC9B,MAAIA,GAASC,GACLD,EAASE,WAGhBL,GAAKM,KAAK,iBAAmBH,EAASI,OAAS,IAAMJ,EAASK,WAAa,IAAML,EAASM,MAEzF,SAAAC,GAAA,MAAOV,GAAKM,KAAKI,KAAMR,KAAK,SAAAS,GAC9B,GAAIA,EACH,GAAIxC,MAAMyC,QAAQD,EAAKZ,SAAU,CAChC,GAAIA,GAAUY,EAAKZ,OAEnBA,GAAQc,KAAK,SAACC,EAAGC,GAAJ,MAAUD,GAAEE,QAAUD,EAAEC,WAAgBF,EAAEE,SAAWD,EAAEC,QAAWF,EAAEG,UAAYF,EAAEE,aAAkBH,EAAEG,WAAaF,EAAEE,UAAY,EAAI,EAAM,IACxJjB,EAAKkB,UAAUnB,QAAQA,QAGvBC,GAAKM,KAAK,mCDoEZ9E,IAAK,OACLmB,MAAO,SC/DH+D,GACLS,QAAQC,IAAIV,MDwEXlF,IAAK,SACLmB,MAAO,WChER,GAAIoD,GAAUJ,KAAKG,MAAMC,QACrBsB,EAAU1B,KAAK9B,MAAewD,QAC9BC,EAAWvB,EAAQzC,OAASyC,EAAQwB,OAAO,SAACC,EAAQC,GAIvD,MAHID,GAAOE,QAAQD,EAAKJ,cACvBG,EAAOG,KAAKF,EAAKJ,SAEXG,SAGR,OADAF,GAAST,OACTrD,EAAA4B,EAAAwC,UAAAC,MACkBlC,KAAK9B,MAAMgE,OAD7B,OAAArE,EAAA,OAAAgC,UAEiB,cAFjB,OAAAD,EAAA/B,EAIIsE,GAJJC,KAIyBT,EAJzBU,QAI4CX,EAJ5CY,SAI+DtC,KAAK9B,MAAMqE,gBAJ1E1E,EAKI2E,GALJpC,QAKwBA,EALxBsB,QAK0CA,UD2EnC5B,GChIkBV,EAAAlD,QAAMuG,WA4D3BC,EAA0B,SAAUR,GACzC,OACCR,QAASQ,EAAMS,UAAUjB,UAIrBkB,EAAwB,SAAUC,EAAU3E,GACjD,OACCqE,cAAe,SAAUO,GACxBD,GAAU5E,KAAK,iBAAkByD,QAAQoB,EAAItF,OAAOR,WAKjD+F,KAAYtD,EAAAuD,SAAaN,EAAyBE,GAAuB9C,GD6E1EmD,EAAQpF,EAAK,UAChBb,MCnEe,IAAO,IDoEf,mBCxEHmF,EAAiB,SAAUjE,GAAO,GAClCkE,GAA2BlE,EAA3BkE,KAAMC,EAAqBnE,EAArBmE,QAASC,EAAYpE,EAAZoE,QACpB,OAAAzE,GAAA,UAAAgC,UACmB,kBADnB7C,MAC4CqF,GAAW,GADvDC,SACqEA,GADrE,OAAAW,EAGGb,EAAKzE,OAASyE,EAAKc,IAAI,SAAApB,GAAA,MAAAjE,GAAA,UAAAb,MAAuB8E,GAAWA,EAAOA,KAAkB,OAUhFU,EAAa,SAAUtE,GAAO,GAC9BkC,GAAoBlC,EAApBkC,QAASsB,EAAWxD,EAAXwD,QACVU,EAAOhC,EAAQzC,OAAU+D,EAAUtB,EAAQ+C,OAAO,SAAArB,GAAA,MAAQA,GAAKJ,SAAWA,IAAWtB,IACzF,OAAAvC,GAAA,OAAAgC,UACiB,eAAiBuC,EAAKzE,OAAS,GAAK,WADrD,OAEGyE,EAAKzE,OAASyE,EAAKc,IAAI,SAAApB,GAAA,MAAQ1C,GAAAlD,QAAAkH,cAACC,EAAgBvB,KAAY,kBAU1DuB,EAAc,SAAUC,GAC7B,GAAIC,GAAM,GAAIC,MAAKF,EAAMjC,SACrBoC,EAAM,GAAID,MAAKF,EAAMhC,WACrBoC,EAAI,SAACC,GACR,GAAIC,GAAID,EAAEE,WAAYC,EAAIH,EAAEI,YAC5B,QAAQH,EAAI,GAAK,IAAMA,EAAIA,GAAK,KAAOE,EAAI,GAAK,IAAMA,EAAIA,GAE3D,OAAAjG,GAAA,OAAAgC,UACgB,gBAAoByD,EAAMU,GAD1CnG,EAAA,OAAAgC,UAEiB,mBAFjB,iBAAAhC,EAAA,iBAEiDyF,EAAMU,KAFvDnG,EAAA,OAAAgC,UAGiB,0BAHjB,OAG2CyD,EAAMW,UAAUC,KAH3D,MAGoEZ,EAAMW,UAAUE,IAHpFtG,EAAA,OAAAgC,UAIiB,wBAJjB,gBAAAhC,EAAA,QAAAgC,UAI8D,QAJ9D,OAIsE0D,EAAIa,sBAJ1E,MAAAvG,EAAA,QAAAgC,UAIyH,QAJzH,OAIiI6D,EAAEH,KAJnI1F,EAAA,OAAAgC,UAKiB,0BALjB,iBAAAhC,EAAA,QAAAgC,UAKiE,QALjE,OAKyE4D,EAAIW,sBAL7E,MAAAvG,EAAA,QAAAgC,UAK4H,QAL5H,OAKoI6D,EAAED,KALtI5F,EAAA,OAAAgC,UAMiB,wBANjB,uBAAAhC,EAAA,iBAM4DyF,EAAM5B,YAU7D2C,EAAc,SAAUC,GAC7B,GAAIC,IAAc5B,WAAWjB,QAAQ,OACjC8C,GACH7B,UAAW,WAAgD,GAAtCxC,GAAsCzC,UAAAC,OAAA,GAAAe,SAAAhB,UAAA,GAAAA,UAAA,GAA9B6G,EAAW5B,UAAW8B,EAAQ/G,UAAA,EAC1D,QAAO+G,EAAOxG,MACb,IAAK,iBACJ,MAAAX,MAAW6C,GAAOuB,QAAQ+C,EAAO/C,SAClC,SACC,MAAOvB,MAKPuE,EAAIlF,EAAMmF,gBAAgBH,EAE9B,OADYhF,GAAM6E,YAAYK,EAAGJ,IAI5BpC,EAAQmC,GAOd/E,GAAApD,QAAS0I,OAAT/G,EACEkF,GADFb,MACmBA,IAClB2C,SAASC,eAAe","file":"main.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(97);\n\n\n/***/ },\n\n/***/ 34:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 97:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/*\r\n\t* Для просмотра в браузере без webpack закоментировать все импорты\r\n\t* и раскоментирорвать две константы под ними.\r\n\t*/\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _jsx = function () { var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7; return function createRawReactElement(type, props, key, children) { var defaultProps = type && type.defaultProps; var childrenLength = arguments.length - 3; if (!props && childrenLength !== 0) { props = {}; } if (props && defaultProps) { for (var propName in defaultProps) { if (props[propName] === void 0) { props[propName] = defaultProps[propName]; } } } else if (!props) { props = defaultProps || {}; } if (childrenLength === 1) { props.children = children; } else if (childrenLength > 1) { var childArray = Array(childrenLength); for (var i = 0; i < childrenLength; i++) { childArray[i] = arguments[i + 3]; } props.children = childArray; } return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: key === undefined ? null : '' + key, ref: null, props: props, _owner: null }; }; }();\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(21);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(37);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _redux = __webpack_require__(33);\n\t\n\tvar Redux = _interopRequireWildcard(_redux);\n\t\n\tvar _reactRedux = __webpack_require__(53);\n\t\n\t__webpack_require__(34);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t//const {Provider} = ReactRedux;\n\t//const reduxConnect = ReactRedux.connect;\n\t\n\t\n\tvar config = {\n\t\t// Урл внешнего файла с данными о перелётах\n\t\tdataSrc: 'data.json'\n\t};\n\t\n\t/*\r\n\t* Основной компонент - контейнер приложения\r\n\t*/\n\t\n\tvar _ref = _jsx('div', {\n\t\tclassName: 'flight-title'\n\t}, void 0, '\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044E:');\n\t\n\tvar FlightAppCls = function (_React$Component) {\n\t\t_inherits(FlightAppCls, _React$Component);\n\t\n\t\tfunction FlightAppCls(props) {\n\t\t\t_classCallCheck(this, FlightAppCls);\n\t\n\t\t\tvar _this = _possibleConstructorReturn(this, (FlightAppCls.__proto__ || Object.getPrototypeOf(FlightAppCls)).call(this, props));\n\t\n\t\t\t_this.state = { flights: [] /*, carrier:null*/ };\n\t\t\treturn _this;\n\t\t}\n\t\n\t\t_createClass(FlightAppCls, [{\n\t\t\tkey: 'componentDidMount',\n\t\t\tvalue: function componentDidMount() {\n\t\t\t\tvar _this2 = this;\n\t\n\t\t\t\tfetch(config.dataSrc, {}).then(function (response) {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn response.json(); //promise\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this2._err('NetworkError: ' + response.status + ' ' + response.statusText + ' ' + response.url);\n\t\t\t\t\t}\n\t\t\t\t}, function (err) {\n\t\t\t\t\treturn _this2._err(err);\n\t\t\t\t}).then(function (data) {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tif (Array.isArray(data.flights)) {\n\t\t\t\t\t\t\tvar flights = data.flights;\n\t\t\t\t\t\t\t// Отсортировать, если нет строгой уверенности, что они уже отсортированы...\n\t\t\t\t\t\t\tflights.sort(function (a, b) {\n\t\t\t\t\t\t\t\treturn a.arrival < b.arrival ? -1 : a.arrival == b.arrival ? a.departure < b.departure ? -1 : a.departure == b.departure ? 0 : 1 : 1;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this2.setState({ flights: flights });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this2._err('ServerError: No valid data');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: '_err',\n\t\t\tvalue: function _err(err) {\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\n\t\t\t/*onChangeCarrier (evt) {\r\n\t  \tevt.stopPropagation();\r\n\t  \tthis.setState({carrier:evt.target.value});\r\n\t  }*/\n\t\n\t\t}, {\n\t\t\tkey: 'render',\n\t\t\tvalue: function render() {\n\t\t\t\tvar flights = this.state.flights;\n\t\t\t\tvar carrier = this.props /*state*/.carrier;\n\t\t\t\tvar carriers = flights.length ? flights.reduce(function (result, item) {\n\t\t\t\t\tif (result.indexOf(item.carrier) == -1) {\n\t\t\t\t\t\tresult.push(item.carrier);\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}, []) : [];\n\t\t\t\tcarriers.sort();\n\t\t\t\treturn _jsx(_reactRedux.Provider, {\n\t\t\t\t\tstore: this.props.store\n\t\t\t\t}, void 0, _jsx('div', {\n\t\t\t\t\tclassName: 'flight-app'\n\t\t\t\t}, void 0, _ref, _jsx(FlightSelector, {\n\t\t\t\t\tlist: carriers,\n\t\t\t\t\tcurrent: carrier,\n\t\t\t\t\tonChange: this.props.changeCarrier /*this.onChangeCarrier.bind(this)*/\n\t\t\t\t}), _jsx(FlightList, {\n\t\t\t\t\tflights: flights,\n\t\t\t\t\tcarrier: carrier\n\t\t\t\t})));\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn FlightAppCls;\n\t}(_react2.default.Component);\n\t\n\tvar mapperStoreStateToProps = function mapperStoreStateToProps(store) {\n\t\treturn {\n\t\t\tcarrier: store.flightApp.carrier\n\t\t};\n\t};\n\t\n\tvar mapperDispatchToProps = function mapperDispatchToProps(dispatch, props) {\n\t\treturn {\n\t\t\tchangeCarrier: function changeCarrier(evt) {\n\t\t\t\tdispatch({ type: 'CHANGE_CARRIER', carrier: evt.target.value });\n\t\t\t}\n\t\t};\n\t};\n\t\n\tvar FlightApp = (0, _reactRedux.connect)(mapperStoreStateToProps, mapperDispatchToProps)(FlightAppCls);\n\t\n\t/*\r\n\t* Внутренний компонент - селектор\r\n\t*/\n\t\n\tvar _ref2 = _jsx('option', {\n\t\tvalue: ''\n\t}, '0', '\\u0412\\u0441\\u0435 \\u0430\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u0430\\u043D\\u0438\\u0438');\n\t\n\tvar FlightSelector = function FlightSelector(props) {\n\t\tvar list = props.list,\n\t\t    current = props.current,\n\t\t    onChange = props.onChange;\n\t\n\t\treturn _jsx('select', {\n\t\t\tclassName: 'flight-selector',\n\t\t\tvalue: current || '',\n\t\t\tonChange: onChange\n\t\t}, void 0, _ref2, list.length ? list.map(function (item) {\n\t\t\treturn _jsx('option', {\n\t\t\t\tvalue: item\n\t\t\t}, item, item);\n\t\t}) : null);\n\t};\n\t\n\t/*\r\n\t* Внутренний компонент - список\r\n\t*/\n\tvar FlightList = function FlightList(props) {\n\t\tvar flights = props.flights,\n\t\t    carrier = props.carrier;\n\t\n\t\tvar list = flights.length ? carrier ? flights.filter(function (item) {\n\t\t\treturn item.carrier == carrier;\n\t\t}) : flights : [];\n\t\treturn _jsx('div', {\n\t\t\tclassName: 'flight-list' + (list.length ? '' : ' empty')\n\t\t}, void 0, list.length ? list.map(function (item) {\n\t\t\treturn _react2.default.createElement(FlightEntry, item);\n\t\t}) : 'Нет данных...');\n\t};\n\t\n\t/*\r\n\t* Внутренний компонент - элемент списка\r\n\t*/\n\tvar FlightEntry = function FlightEntry(entry) {\n\t\tvar dt1 = new Date(entry.arrival);\n\t\tvar dt2 = new Date(entry.departure);\n\t\tvar f = function f(t) {\n\t\t\tvar h = t.getHours(),\n\t\t\t    m = t.getMinutes();\n\t\t\treturn (h < 10 ? '0' + h : h) + ':' + (m < 10 ? '0' + m : m);\n\t\t};\n\t\treturn _jsx('div', {\n\t\t\tclassName: 'flight-entry'\n\t\t}, entry.id, _jsx('div', {\n\t\t\tclassName: 'flight-entry-id'\n\t\t}, void 0, '\\u0440\\u0435\\u0439\\u0441 \\u2116 ', _jsx('span', {}, void 0, entry.id)), _jsx('div', {\n\t\t\tclassName: 'flight-entry-direction'\n\t\t}, void 0, entry.direction.from, ' - ', entry.direction.to), _jsx('div', {\n\t\t\tclassName: 'flight-entry-arrival'\n\t\t}, void 0, '\\u0412\\u044B\\u043B\\u0435\\u0442 ', _jsx('span', {\n\t\t\tclassName: 'date'\n\t\t}, void 0, dt1.toLocaleDateString()), ' \\u0432 ', _jsx('span', {\n\t\t\tclassName: 'time'\n\t\t}, void 0, f(dt1))), _jsx('div', {\n\t\t\tclassName: 'flight-entry-departure'\n\t\t}, void 0, '\\u041F\\u0440\\u0438\\u043B\\u0451\\u0442 ', _jsx('span', {\n\t\t\tclassName: 'date'\n\t\t}, void 0, dt2.toLocaleDateString()), ' \\u0432 ', _jsx('span', {\n\t\t\tclassName: 'time'\n\t\t}, void 0, f(dt2))), _jsx('div', {\n\t\t\tclassName: 'flight-entry-carrier'\n\t\t}, void 0, '\\u0410\\u0432\\u0438\\u0430\\u043A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F ', _jsx('span', {}, void 0, entry.carrier)));\n\t};\n\t\n\t/*\r\n\t* Хранилище состояний Redux\r\n\t*/\n\tvar createStore = function createStore(initData) {\n\t\tvar initStates = { flightApp: { carrier: null } };\n\t\tvar reducers = {\n\t\t\tflightApp: function flightApp() {\n\t\t\t\tvar state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initStates.flightApp;\n\t\t\t\tvar action = arguments[1];\n\t\n\t\t\t\tswitch (action.type) {\n\t\t\t\t\tcase 'CHANGE_CARRIER':\n\t\t\t\t\t\treturn _extends({}, state, { carrier: action.carrier });\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn state;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tvar r = Redux.combineReducers(reducers);\n\t\tvar store = Redux.createStore(r, initData);\n\t\treturn store;\n\t};\n\t\n\tvar store = createStore();\n\t\n\t/*\r\n\t* Внедрение в страницу\r\n\t*/\n\t_reactDom2.default.render(_jsx(FlightApp, {\n\t\tstore: store\n\t}), document.getElementById('react-root'));\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// main.js","'use strict';\r\n\r\n/*\r\n* Для просмотра в браузере без webpack закоментировать все импорты\r\n* и раскоментирорвать две константы под ними.\r\n*/\r\nimport React/*, {Component}*/ from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport * as Redux from 'redux';\r\nimport /* * as ReactRedux*/ {Provider, connect as reduxConnect} from 'react-redux';\r\nimport '../css/main.css';\r\n//const {Provider} = ReactRedux;\r\n//const reduxConnect = ReactRedux.connect;\r\n\r\n\r\n\r\nconst config = {\r\n\t// Урл внешнего файла с данными о перелётах\r\n\tdataSrc: 'data.json'\r\n};\r\n\r\n\r\n\r\n/*\r\n* Основной компонент - контейнер приложения\r\n*/\r\nclass FlightAppCls extends React.Component {\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {flights:[]/*, carrier:null*/};\r\n\t}\r\n\r\n\tcomponentDidMount () {\r\n\t\tfetch(config.dataSrc, {}).then(response => {\r\n\t\t\tif (response.ok) {\r\n\t\t\t\treturn response.json();//promise\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._err('NetworkError: ' + response.status + ' ' + response.statusText + ' ' + response.url);\r\n\t\t\t}\r\n\t\t}, err => this._err(err)).then(data => {\r\n\t\t\tif (data) {\r\n\t\t\t\tif (Array.isArray(data.flights)) {\r\n\t\t\t\t\tlet flights = data.flights;\r\n\t\t\t\t\t// Отсортировать, если нет строгой уверенности, что они уже отсортированы...\r\n\t\t\t\t\tflights.sort((a, b) => a.arrival < b.arrival ? -1 : (a.arrival == b.arrival ? (a.departure < b.departure ? -1 : (a.departure == b.departure ? 0 : 1)) : 1));\r\n\t\t\t\t\tthis.setState({flights:flights});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._err('ServerError: No valid data');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_err (err) {\r\n\t\tconsole.log(err);\r\n\t}\r\n\r\n\t/*onChangeCarrier (evt) {\r\n\t\tevt.stopPropagation();\r\n\t\tthis.setState({carrier:evt.target.value});\r\n\t}*/\r\n\r\n\trender () {\r\n\t\tlet flights = this.state.flights;\r\n\t\tlet carrier = this.props/*state*/.carrier;\r\n\t\tlet carriers = flights.length ? flights.reduce((result, item) => {\r\n\t\t\tif (result.indexOf(item.carrier) == -1) {\r\n\t\t\t\tresult.push(item.carrier);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}, []) : [];\r\n\t\tcarriers.sort();\r\n\t\treturn (\r\n\t\t\t<Provider store={this.props.store}>\r\n\t\t\t\t<div className=\"flight-app\">\r\n\t\t\t\t\t<div className=\"flight-title\">Выберите авиакомпанию:</div>\r\n\t\t\t\t\t<FlightSelector list={carriers} current={carrier} onChange={this.props.changeCarrier/*this.onChangeCarrier.bind(this)*/} />\r\n\t\t\t\t\t<FlightList flights={flights} carrier={carrier} />\r\n\t\t\t\t</div>\r\n\t\t\t</Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapperStoreStateToProps = function (store) {\r\n\treturn {\r\n\t\tcarrier: store.flightApp.carrier\r\n\t};\r\n}\r\n\r\nconst mapperDispatchToProps = function (dispatch, props) {\r\n\treturn {\r\n\t\tchangeCarrier: function (evt) {\r\n\t\t\tdispatch({type:'CHANGE_CARRIER', carrier:evt.target.value});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst FlightApp = reduxConnect(mapperStoreStateToProps, mapperDispatchToProps)(FlightAppCls);\r\n\r\n\r\n\r\n/*\r\n* Внутренний компонент - селектор\r\n*/\r\nconst FlightSelector = function (props) {\r\n\tlet {list, current, onChange} = props;\r\n\treturn (\r\n\t\t<select className=\"flight-selector\" value={current || ''} onChange={onChange}>\r\n\t\t\t<option value=\"\" key=\"0\">Все авиакомании</option>\r\n\t\t\t{list.length ? list.map(item => <option value={item} key={item}>{item}</option>) : null}\r\n\t\t</select>\r\n\t);\r\n}\r\n\r\n\r\n\r\n/*\r\n* Внутренний компонент - список\r\n*/\r\nconst FlightList = function (props) {\r\n\tlet {flights, carrier} = props;\r\n\tlet list = flights.length ? (carrier ? flights.filter(item => item.carrier == carrier) : flights) : [];\r\n\treturn (\r\n\t\t<div className={'flight-list' + (list.length ? '' : ' empty')}>\r\n\t\t\t{list.length ? list.map(item => <FlightEntry {...item} />) : 'Нет данных...'}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\n\r\n/*\r\n* Внутренний компонент - элемент списка\r\n*/\r\nconst FlightEntry = function (entry) {\r\n\tlet dt1 = new Date(entry.arrival);\r\n\tlet dt2 = new Date(entry.departure);\r\n\tlet f = (t) => {\r\n\t\tlet h = t.getHours(), m = t.getMinutes();\r\n\t\treturn (h < 10 ? '0' + h : h) + ':' + (m < 10 ? '0' + m : m);\r\n\t};\r\n\treturn (\r\n\t\t<div className=\"flight-entry\" key={entry.id}>\r\n\t\t\t<div className=\"flight-entry-id\">рейс № <span>{entry.id}</span></div>\r\n\t\t\t<div className=\"flight-entry-direction\">{entry.direction.from} - {entry.direction.to}</div>\r\n\t\t\t<div className=\"flight-entry-arrival\">Вылет <span className=\"date\">{dt1.toLocaleDateString()}</span> в <span className=\"time\">{f(dt1)}</span></div>\r\n\t\t\t<div className=\"flight-entry-departure\">Прилёт <span className=\"date\">{dt2.toLocaleDateString()}</span> в <span className=\"time\">{f(dt2)}</span></div>\r\n\t\t\t<div className=\"flight-entry-carrier\">Авиакомпания <span>{entry.carrier}</span></div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n\r\n\r\n/*\r\n* Хранилище состояний Redux\r\n*/\r\nconst createStore = function (initData) {\r\n\tlet initStates = {flightApp:{carrier:null}};\r\n\tlet reducers = {\r\n\t\tflightApp: function (state = initStates.flightApp, action) {\r\n\t\t\tswitch(action.type) {\r\n\t\t\t\tcase 'CHANGE_CARRIER':\r\n\t\t\t\t\treturn {...state, carrier:action.carrier};\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tlet r = Redux.combineReducers(reducers);\r\n\tlet store = Redux.createStore(r, initData);\r\n\treturn store;\r\n}\r\n\r\nconst store = createStore();\r\n\r\n\r\n\r\n/*\r\n* Внедрение в страницу\r\n*/\r\nReactDOM.render(\r\n\t<FlightApp store={store} />,\r\n\tdocument.getElementById('react-root')\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./app-src/js/main.js"],"sourceRoot":""}