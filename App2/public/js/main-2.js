webpackJsonp([2],{0:function(r,t,e){r.exports=e(96)},34:function(r,t){},96:function(r,t,e){"use strict";function n(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t.default=r,t}function i(r){return r&&r.__esModule?r:{default:r}}function o(r,t){var e={};for(var n in r)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}function a(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function u(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?r:t}function l(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var c=function(){function r(r,t){var e=[],n=!0,i=!1,o=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done)&&(e.push(a.value),!t||e.length!==t);n=!0);}catch(r){i=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},s=function(){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,e,n,i){var o=t&&t.defaultProps,a=arguments.length-3;if(e||0===a||(e={}),e&&o)for(var u in o)void 0===e[u]&&(e[u]=o[u]);else e||(e=o||{});if(1===a)e.children=i;else if(a>1){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+3];e.children=l}return{$$typeof:r,type:t,key:void 0===n?null:""+n,ref:null,props:e,_owner:null}}}(),p=function(){function r(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),d=e(21),v=i(d),h=e(37),y=i(h),g=e(33),m=n(g),b=e(53);e(34);var S={dataSrc:"data.json"},w=s("div",{className:"flight-title"},void 0,"Выберите авиакомпанию:"),_=function(r){function t(){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,r),p(t,[{key:"componentDidMount",value:function(){this.props.loadFlights(S.dataSrc)}},{key:"render",value:function(){var r=this.props,t=r.flights,e=r.carrier,n=t.length?t.reduce(function(r,t){return r.indexOf(t.carrier)==-1&&r.push(t.carrier),r},[]):[];return n.sort(),s(b.Provider,{store:this.props.store},void 0,s("div",{className:"flight-app"},void 0,w,s(R,{list:n,current:e,onChange:this.props.changeCarrier}),s(j,{flights:t,carrier:e})))}}]),t}(v.default.Component),E=function(r){return{flights:r.flightApp.flights,carrier:r.flightApp.carrier}},N=function(r,t){return{changeCarrier:function(t){r({type:"CHANGE_CARRIER",carrier:t.target.value})},loadFlights:function(t){r({types:["FLIGHTS_REQUEST","FLIGHTS_SUCCESS","FLIGHTS_ERR"],promise:function(){return O(t)}})}}},O=function(r){return fetch(r,{}).then(function(r){if(r.ok)return r.json();throw"NetworkError: "+r.status+" "+r.statusText+" "+r.url}).then(function(r){if(r){if(Array.isArray(r.flights)){var t=r.flights;return t.sort(function(r,t){return r.arrival<t.arrival?-1:r.arrival==t.arrival?r.departure<t.departure?-1:r.departure==t.departure?0:1:1}),{flights:t}}throw"ServerError: No valid data"}})},C=(0,b.connect)(E,N)(_),A=s("option",{value:""},"0","Все авиакомании"),R=function(r){var t=r.list,e=r.current,n=r.onChange;return s("select",{className:"flight-selector",value:e||"",onChange:n},void 0,A,t.length?t.map(function(r){return s("option",{value:r},r,r)}):null)},j=function(r){var t=r.flights,e=r.carrier,n=t.length?e?t.filter(function(r){return r.carrier==e}):t:[];return s("div",{className:"flight-list"+(n.length?"":" empty")},void 0,n.length?n.map(function(r){return v.default.createElement(T,r)}):"Нет данных...")},T=function(r){var t=new Date(r.arrival),e=new Date(r.departure),n=function(r){var t=r.getHours(),e=r.getMinutes();return(t<10?"0"+t:t)+":"+(e<10?"0"+e:e)};return s("div",{className:"flight-entry"},r.id,s("div",{className:"flight-entry-id"},void 0,"рейс № ",s("span",{},void 0,r.id)),s("div",{className:"flight-entry-direction"},void 0,r.direction.from," - ",r.direction.to),s("div",{className:"flight-entry-arrival"},void 0,"Вылет ",s("span",{className:"date"},void 0,t.toLocaleDateString())," в ",s("span",{className:"time"},void 0,n(t))),s("div",{className:"flight-entry-departure"},void 0,"Прилёт ",s("span",{className:"date"},void 0,e.toLocaleDateString())," в ",s("span",{className:"time"},void 0,n(e))),s("div",{className:"flight-entry-carrier"},void 0,"Авиакомпания ",s("span",{},void 0,r.carrier)))},I=function(r){var t={flightApp:{flights:[],carrier:null}},e={flightApp:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.flightApp,e=arguments[1];switch(e.type){case"CHANGE_CARRIER":return f({},r,{carrier:e.carrier});case"FLIGHTS_REQUEST":return r;case"FLIGHTS_SUCCESS":return f({},r,{flights:e.flights});case"FLIGHTS_ERR":return console.log(e.error),r;default:return r}}},n=m.combineReducers(e);return m.applyMiddleware(H)(m.createStore)(n,r)},H=function(){return function(r){return function(t){var e=t.promise,n=t.types,i=o(t,["promise","types"]);if(!e)return r(t);var a=c(n,3),u=a[0],l=a[1],s=a[2];return r(f({type:u},i)),e().then(function(t){r(f({type:l},t,i))},function(t){r(f({type:s,error:""+t},i))})}}},P=I();y.default.render(s(C,{store:P}),document.getElementById("react-root"))}});
//# sourceMappingURL=main-2.js.map