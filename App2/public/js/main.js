webpackJsonp([1],{0:function(r,e,t){r.exports=t(97)},34:function(r,e){},97:function(r,e,t){"use strict";function n(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function i(r){return r&&r.__esModule?r:{default:r}}function a(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function o(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function l(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}var c=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},u=function(){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(e,t,n,i){var a=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={}),t&&a)for(var l in a)void 0===t[l]&&(t[l]=a[l]);else t||(t=a||{});if(1===o)t.children=i;else if(o>1){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}}(),s=function(){function r(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),f=t(21),p=i(f),d=t(37),v=i(d),h=t(33),g=n(h),y=t(53);t(34);var m={dataSrc:"data.json"},b=u("div",{className:"flight-title"},void 0,"Выберите авиакомпанию:"),_=function(r){function e(r){a(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return t.state={flights:[]},t}return l(e,r),s(e,[{key:"componentDidMount",value:function(){var r=this;fetch(m.dataSrc,{}).then(function(e){return e.ok?e.json():void r._err("NetworkError: "+e.status+" "+e.statusText+" "+e.url)},function(e){return r._err(e)}).then(function(e){if(e)if(Array.isArray(e.flights)){var t=e.flights;t.sort(function(r,e){return r.arrival<e.arrival?-1:r.arrival==e.arrival?r.departure<e.departure?-1:r.departure==e.departure?0:1:1}),r.setState({flights:t})}else r._err("ServerError: No valid data")})}},{key:"_err",value:function(r){console.log(r)}},{key:"render",value:function(){var r=this.state.flights,e=this.props.carrier,t=r.length?r.reduce(function(r,e){return r.indexOf(e.carrier)==-1&&r.push(e.carrier),r},[]):[];return t.sort(),u(y.Provider,{store:this.props.store},void 0,u("div",{className:"flight-app"},void 0,b,u(A,{list:t,current:e,onChange:this.props.changeCarrier}),u(C,{flights:r,carrier:e})))}}]),e}(p.default.Component),N=function(r){return{carrier:r.flightApp.carrier}},w=function(r,e){return{changeCarrier:function(e){r({type:"CHANGE_CARRIER",carrier:e.target.value})}}},O=(0,y.connect)(N,w)(_),j=u("option",{value:""},"0","Все авиакомании"),A=function(r){var e=r.list,t=r.current,n=r.onChange;return u("select",{className:"flight-selector",value:t||"",onChange:n},void 0,j,e.length?e.map(function(r){return u("option",{value:r},r,r)}):null)},C=function(r){var e=r.flights,t=r.carrier,n=e.length?t?e.filter(function(r){return r.carrier==t}):e:[];return u("div",{className:"flight-list"+(n.length?"":" empty")},void 0,n.length?n.map(function(r){return p.default.createElement(E,r)}):"Нет данных...")},E=function(r){var e=new Date(r.arrival),t=new Date(r.departure),n=function(r){var e=r.getHours(),t=r.getMinutes();return(e<10?"0"+e:e)+":"+(t<10?"0"+t:t)};return u("div",{className:"flight-entry"},r.id,u("div",{className:"flight-entry-id"},void 0,"рейс № ",u("span",{},void 0,r.id)),u("div",{className:"flight-entry-direction"},void 0,r.direction.from," - ",r.direction.to),u("div",{className:"flight-entry-arrival"},void 0,"Вылет ",u("span",{className:"date"},void 0,e.toLocaleDateString())," в ",u("span",{className:"time"},void 0,n(e))),u("div",{className:"flight-entry-departure"},void 0,"Прилёт ",u("span",{className:"date"},void 0,t.toLocaleDateString())," в ",u("span",{className:"time"},void 0,n(t))),u("div",{className:"flight-entry-carrier"},void 0,"Авиакомпания ",u("span",{},void 0,r.carrier)))},S=function(r){var e={flightApp:{carrier:null}},t={flightApp:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.flightApp,t=arguments[1];switch(t.type){case"CHANGE_CARRIER":return c({},r,{carrier:t.carrier});default:return r}}},n=g.combineReducers(t);return g.createStore(n,r)},k=S();v.default.render(u(O,{store:k}),document.getElementById("react-root"))}});
//# sourceMappingURL=main.js.map